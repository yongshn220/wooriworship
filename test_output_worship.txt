
> wooriworship@0.1.0 test
> jest global-states/worship-state.test.tsx

  console.log
    üî• Configured DB ID: undefined

      at Object.<anonymous> (firebase.ts:23:9)

  console.log
    üî• Initialized Modular Firestore with DB ID: (default)

      at Object.<anonymous> (firebase.ts:30:9)

  console.error
    Warning: Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.
        at Batcher (/Users/yongjung/Private/Work/Programming/wooriworship/web/wooriworship/node_modules/recoil/cjs/index.js:4348:3)
        at RecoilRoot_INTERNAL (/Users/yongjung/Private/Work/Programming/wooriworship/web/wooriworship/node_modules/recoil/cjs/index.js:4438:3)
        at RecoilRoot (/Users/yongjung/Private/Work/Programming/wooriworship/web/wooriworship/node_modules/recoil/cjs/index.js:4604:5)
        at wrapper (/Users/yongjung/Private/Work/Programming/wooriworship/web/wooriworship/global-states/worship-state.test.tsx:23:24)

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnAboutUpdateOnNotYetMountedFiberInDEV (node_modules/react-dom/cjs/react-dom.development.js:27441:7)
      at markUpdateLaneFromFiberToRoot (node_modules/react-dom/cjs/react-dom.development.js:14526:11)
      at enqueueConcurrentHookUpdate (node_modules/react-dom/cjs/react-dom.development.js:14456:10)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16704:16)
      at node_modules/recoil/cjs/index.js:4353:34
      at Object.replaceState (node_modules/recoil/cjs/index.js:4553:53)
      at applyActionsToStore (node_modules/recoil/cjs/index.js:2880:9)
      at queueOrPerformStateUpdate (node_modules/recoil/cjs/index.js:2904:5)
      at markRecoilValueModified (node_modules/recoil/cjs/index.js:2967:3)
      at notifyWaitingStores (node_modules/recoil/cjs/index.js:7162:9)
      at notifyStoresOfResolvedAsync (node_modules/recoil/cjs/index.js:7135:5)
      at resolveAsync (node_modules/recoil/cjs/index.js:7127:5)
      at node_modules/recoil/cjs/index.js:7220:7

FAIL global-states/worship-state.test.tsx
  WorshipState
    currentTeamWorshipListAtom
      ‚úì should fetch and sort worships by date descending (62 ms)
      ‚úï should return empty array on fetch failure (1018 ms)
    worshipSongListAtom
      ‚úì should aggregate songs for a specific worship (57 ms)

  ‚óè WorshipState ‚Ä∫ currentTeamWorshipListAtom ‚Ä∫ should return empty array on fetch failure

    expect(received).toEqual(expected) // deep equality

    - Expected  -  1
    + Received  + 16

    - Array []
    + Array [
    +   Object {
    +     "id": "w2",
    +     "worship_date": Object {
    +       "nanoseconds": 0,
    +       "seconds": 1675209600,
    +     },
    +   },
    +   Object {
    +     "id": "w1",
    +     "worship_date": Object {
    +       "nanoseconds": 0,
    +       "seconds": 1672531200,
    +     },
    +   },
    + ]

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

      57 |             await waitFor(() => {
      58 |                 expect(result.current.state).toBe('hasValue');
    > 59 |                 expect(result.current.contents).toEqual([]);
         |                                                 ^
      60 |             });
      61 |         });
      62 |     });

      at global-states/worship-state.test.tsx:59:49
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 2 passed, 3 total
Snapshots:   0 total
Time:        1.921 s, estimated 3 s
Ran all test suites matching /global-states\/worship-state.test.tsx/i.
